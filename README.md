# ğŸ›’ E-commerce Purchase Prediction System

> ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘ë¶€í„° ë¨¸ì‹ ëŸ¬ë‹ ì˜ˆì¸¡ê¹Œì§€, End-to-End ë°ì´í„° íŒŒì´í”„ë¼ì¸

## ğŸ“Š ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ğŸ”„ ì „ì²´ íŒŒì´í”„ë¼ì¸

| Layer | Components | Description |
|-------|-----------|-------------|
| **ğŸ¯ Orchestration** | Airflow Scheduler | ETL + Retraining ìë™í™” |
| â¬‡ï¸ | | |
| **ğŸ“¥ Data Pipeline** | Filebeat â†’ Logstash â†’ Elasticsearch | ë¡œê·¸ ìˆ˜ì§‘ ë° ì²˜ë¦¬ |
| | MinIO | ë°ì´í„° ì €ì¥ì†Œ |
| | Spark / Delta Lake | ETL ì²˜ë¦¬ |
| | Data Warehouse / Data Mart | ë¶„ì„ìš© ë°ì´í„° ì ì¬ |
| â¬‡ï¸ | | |
| **ğŸ¤– ML Pipeline** | Feature Engineering | í”¼ì²˜ ìƒì„± ë° ë³€í™˜ |
| | LGBM / XGB / CatBoost | ëª¨ë¸ í•™ìŠµ |
| | SHAP | ëª¨ë¸ í•´ì„ |
| | Feast Feature Store | í”¼ì²˜ ì €ì¥ ë° ê´€ë¦¬ |
| â¬‡ï¸ | | |
| **ğŸš€ Serving Layer** | FastAPI | REST API ì„œë²„ |
| | Redis (Online Store) | ì‹¤ì‹œê°„ í”¼ì²˜ ìºì‹± |
| | Streamlit | ì›¹ UI |
| â¬‡ï¸ | | |
| **ğŸ‘¤ User** | Web Interface | ì˜ˆì¸¡ ê²°ê³¼ í™•ì¸ |

### ğŸ“Š ìƒì„¸ ë°ì´í„° íë¦„

**1ï¸âƒ£ Data Collection**
- Filebeat â†’ Logstash â†’ Elasticsearch â†’ MinIO

**2ï¸âƒ£ Data Processing**  
- MinIO â†’ Spark/Delta Lake (ETL) â†’ Data Warehouse

**3ï¸âƒ£ Model Training**
- Data Warehouse â†’ Feature Engineering â†’ ML Models â†’ Feast

**4ï¸âƒ£ Inference**
- Feast â†’ FastAPI â†’ Redis â†’ Streamlit â†’ User

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### ğŸ“¥ Data Ingestion
```
[Logstash] â†’ [S3 Data Lake] â†’ [Elasticsearch] â†’ [Kibana Dashboard]
    â†“            â†“                  â†“                   â†“
ì‹¤ì‹œê°„ ìˆ˜ì§‘   ì›ë³¸ ì €ì¥         ë¡œê·¸ ê²€ìƒ‰          ì‹œê°í™”/ëª¨ë‹ˆí„°ë§
```

### âš™ï¸ Data Processing
```
[AWS Glue] â†’ [PySpark] â†’ [Delta Lake] â†’ [Redshift]
     â†“           â†“            â†“              â†“
 ETL ìë™í™”   ë¶„ì‚° ì²˜ë¦¬   ACID ë³´ì¥    Data Warehouse
```

### ğŸ¤– ML & Analytics
```
[Jupyter] â†’ [Spark SQL] â†’ [scikit-learn] â†’ [Feast] â†’ [Model Deploy]
    â†“           â†“              â†“              â†“            â†“
ë°ì´í„° ë¶„ì„   ëŒ€ìš©ëŸ‰ ì¿¼ë¦¬    ëª¨ë¸ í•™ìŠµ    Feature Store   ìš´ì˜ ë°°í¬
```

### ğŸš€ Deployment
```
[ML Model] â†’ [FastAPI Server] â†’ [Streamlit Cloud] â†’ ğŸŒ Web UI
     â†“              â†“                   â†“
ëª¨ë¸ ì„œë¹™      REST API           ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
```

### ğŸ“Š Quality & Orchestration
```
[Airflow] â†’ [Great Expectations] â†’ [Statistical Tests]
    â†“               â†“                       â†“
ì›Œí¬í”Œë¡œìš°      ë°ì´í„° í’ˆì§ˆ ê²€ì¦      Chi-Square/KS/Z-Test
```

## ğŸ—‚ï¸ Data Lake êµ¬ì¡°

```
ğŸ“¦ Data Lake
â”‚
â”œâ”€â”€ ğŸ“ Raw Zone (ì›ë³¸ ë°ì´í„°)
â”‚   â””â”€â”€ ì‹¤ì‹œê°„ ë¡œê·¸ ë°ì´í„°
â”‚   â””â”€â”€ ì›ë³¸ íŠ¸ëœì­ì…˜ ë°ì´í„°
â”‚   â””â”€â”€ íŒŒí‹°ì…˜: year/month/day/hour
â”‚
â”œâ”€â”€ ğŸ“ Processed Zone (ë³€í™˜ ë°ì´í„°)
â”‚   â””â”€â”€ ì •ì œëœ ë°ì´í„°
â”‚   â””â”€â”€ í‘œì¤€í™”ëœ ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ Delta Lake í¬ë§·
â”‚
â””â”€â”€ ğŸ“ Curated Zone (ë¶„ì„ ë°ì´í„°)
    â””â”€â”€ Dimension Tables (ê³ ê°, ìƒí’ˆ, ì‹œê°„)
    â””â”€â”€ Fact Tables (íŠ¸ëœì­ì…˜)
    â””â”€â”€ Aggregated Data
```

## ğŸ“ˆ í”„ë¡œì íŠ¸ ì§„í–‰ ê³¼ì •

### ğŸ—“ï¸ íƒ€ì„ë¼ì¸

```
Phase 1: ì„¤ê³„ (Week 1-2)
â”œâ”€ ì•„í‚¤í…ì²˜ ì„¤ê³„
â””â”€ ê¸°ìˆ  ìŠ¤íƒ ì„ ì •

Phase 2: ì¸í”„ë¼ êµ¬ì¶• (Week 3-4)
â”œâ”€ ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸
â”œâ”€ S3 Data Lake êµ¬ì„±
â””â”€ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ

Phase 3: ETL ê°œë°œ (Week 5-7)
â”œâ”€ Glue ETL Job ê°œë°œ
â”œâ”€ PySpark ë°ì´í„° ì²˜ë¦¬
â””â”€ Redshift DWH êµ¬ì¶•

Phase 4: ë°ì´í„° í’ˆì§ˆ ê´€ë¦¬ (Week 8-9)
â”œâ”€ Great Expectations ì„¤ì •
â””â”€ í†µê³„ì  ê²€ì¦ (Chi-Square, KS, Z-Test)

Phase 5: ML ê°œë°œ (Week 10-12)
â”œâ”€ EDA ë° í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§
â”œâ”€ ëª¨ë¸ í•™ìŠµ ë° ìµœì í™”
â””â”€ Feature Store êµ¬ì¶• (Feast)

Phase 6: ë°°í¬ (Week 13-14)
â”œâ”€ FastAPI ê°œë°œ
â””â”€ Streamlit Cloud ë°°í¬
```

## ğŸ”„ ë°ì´í„° íŒŒì´í”„ë¼ì¸ Flow

```
1. ë°ì´í„° ìˆ˜ì§‘
   ì‚¬ìš©ì ì´ë²¤íŠ¸ â†’ Logstash â†’ S3 Raw Zone
   
2. ë°ì´í„° ë³€í™˜
   S3 Raw â†’ Glue ETL â†’ PySpark ì²˜ë¦¬ â†’ S3 Processed
   
3. ë°ì´í„° ì ì¬
   S3 Processed â†’ Redshift DWH (Star Schema)
   
4. ë°ì´í„° ë¶„ì„
   Redshift â†’ Spark SQL â†’ Feature Engineering
   
5. ëª¨ë¸ í•™ìŠµ
   Features â†’ scikit-learn â†’ Model Training â†’ Feast Store
   
6. ëª¨ë¸ ì„œë¹™
   Feast â†’ FastAPI â†’ Prediction Service
   
7. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
   FastAPI â†’ Streamlit Cloud â†’ ì‹¤ì‹œê°„ ì˜ˆì¸¡ ê²°ê³¼
```

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### 1ï¸âƒ£ ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘
- Logstashë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë¡œê·¸ ìˆ˜ì§‘
- S3ì— íŒŒí‹°ì…”ë‹ëœ í˜•íƒœë¡œ ì €ì¥
- Elasticsearchë¡œ ì‹¤ì‹œê°„ ê²€ìƒ‰

### 2ï¸âƒ£ ETL íŒŒì´í”„ë¼ì¸
- Glueë¥¼ í†µí•œ ìë™í™”ëœ ë°ì´í„° ë³€í™˜
- PySpark ê¸°ë°˜ ëŒ€ìš©ëŸ‰ ì²˜ë¦¬
- Delta Lake ACID íŠ¸ëœì­ì…˜

### 3ï¸âƒ£ ë°ì´í„° í’ˆì§ˆ ê´€ë¦¬
- Great Expectations ìë™ ê²€ì¦
- í†µê³„ì  í…ŒìŠ¤íŠ¸ (Chi-Square, KS, Z-Test)
- ì´ìƒì¹˜ íƒì§€ ë° ì²˜ë¦¬

### 4ï¸âƒ£ ML íŒŒì´í”„ë¼ì¸
- Feature Engineering ìë™í™”
- Feast Feature Store í™œìš©
- ëª¨ë¸ í•™ìŠµ ë° ìµœì í™”

### 5ï¸âƒ£ ì˜ˆì¸¡ ì„œë¹„ìŠ¤
- FastAPI REST API
- Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤
- ì‹¤ì‹œê°„ ì˜ˆì¸¡ ê²°ê³¼ ì œê³µ

## ğŸŒ ë°ëª¨

### ğŸ”— Live Demo
**https://ecommerce-realtime-predictor.streamlit.app/**

### ğŸ“¸ ì£¼ìš” í™”ë©´

#### 1. ë°ì´í„° ëª¨ë‹ˆí„°ë§
- Kibana ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
- Elasticsearch ê¸°ë°˜ ê²€ìƒ‰ ë° ë¶„ì„

#### 2. ë°ì´í„° í’ˆì§ˆ ë¦¬í¬íŠ¸
- Great Expectations ê²€ì¦ ê²°ê³¼
- í†µê³„ì  í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì‹œê°í™”

#### 3. EDA ë¶„ì„
- êµ¬ë§¤ íŒ¨í„´ ë¶„ì„
- ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ë¶„ì„
- í”¼ì²˜ ì¤‘ìš”ë„ ì‹œê°í™”

#### 4. ì˜ˆì¸¡ ì„œë¹„ìŠ¤
- ì‹¤ì‹œê°„ êµ¬ë§¤ í™•ë¥  ì˜ˆì¸¡
- ê³ ê°ë³„ ì¶”ì²œ ìƒí’ˆ
- ì˜ˆì¸¡ ê²°ê³¼ ì‹œê°í™”

## ğŸ“Š ë°ì´í„° ëª¨ë¸

### â­ Star Schema êµ¬ì¡°

```
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   Dim_Customer  â”‚
               â”‚  - customer_id  â”‚
               â”‚  - name         â”‚
               â”‚  - email        â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dim_Product â”‚  â”‚Fact_Trans  â”‚  â”‚  Dim_Time   â”‚
â”‚- product_id â”‚  â”‚- trans_id  â”‚  â”‚  - time_id  â”‚
â”‚- name       â”‚â—„â”€â”¤- cust_id   â”‚â”€â–ºâ”‚  - date     â”‚
â”‚- price      â”‚  â”‚- prod_id   â”‚  â”‚  - year     â”‚
â”‚- category   â”‚  â”‚- time_id   â”‚  â”‚  - month    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚- amount    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚- purchased â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“‹ í…Œì´ë¸” ì„¤ëª…

**Fact Table (íŠ¸ëœì­ì…˜)**
- êµ¬ë§¤ ì´ë²¤íŠ¸ ì €ì¥
- ì™¸ë˜í‚¤ë¡œ ì°¨ì› í…Œì´ë¸” ì—°ê²°
- ì¸¡ì • ê°€ëŠ¥í•œ ë©”íŠ¸ë¦­ í¬í•¨

**Dimension Tables (ì°¨ì›)**
- ê³ ê° ì •ë³´ (Dim_Customer)
- ìƒí’ˆ ì •ë³´ (Dim_Product)
- ì‹œê°„ ì •ë³´ (Dim_Time)

## âœ¨ ì„±ê³¼

### ğŸ“ˆ ëª¨ë¸ ì„±ëŠ¥
- âœ… **AUC Score: 0.974** (ìš°ìˆ˜í•œ ë¶„ë¥˜ ì„±ëŠ¥)
- âœ… **êµ¬ë§¤ ì˜ˆì¸¡ F1-Score: 73.42%**
- âœ… **Precision: 78.17%** (ì˜ˆì¸¡ ì •í™•ì„±)
- âœ… **Recall: 69.22%** (ì‹¤ì œ êµ¬ë§¤ì íƒì§€ìœ¨)
- âš ï¸ í´ë˜ìŠ¤ ë¶ˆê· í˜•(1:120) í™˜ê²½ì—ì„œ ë‹¬ì„±í•œ ì„±ê³¼

### ğŸš€ ì‹œìŠ¤í…œ ì„±ëŠ¥
- âœ… ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬: **1ì´ˆ ì´ë‚´**
- âœ… ì¼ì¼ ì²˜ë¦¬ ë°ì´í„°: **100ë§Œ ê±´ ì´ìƒ**
- âœ… API ì‘ë‹µ ì‹œê°„: **200ms ì´ë‚´**
- âœ… Feature Store ì¡°íšŒ: **10ms ì´ë‚´**


## ğŸš€ í–¥í›„ ê³„íš

```
í˜„ì¬ ì‹œìŠ¤í…œ
    â”‚
    â”œâ”€â–º Phase 1: ì¸í”„ë¼ ê°•í™” (Q2 2024)
    â”‚   â”œâ”€ Kubernetes ë„ì…
    â”‚   â”‚  â””â”€ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
    â”‚   â””â”€ CDC êµ¬í˜„
    â”‚      â””â”€ ì‹¤ì‹œê°„ ë°ì´í„° ë³€ê²½ ê°ì§€
    â”‚
    â”œâ”€â–º Phase 2: ì‹¤ì‹œê°„ ì²˜ë¦¬ ê°•í™” (Q3 2024)
    â”‚   â”œâ”€ ì‹¤ì‹œê°„ Feature Serving
    â”‚   â”‚  â””â”€ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ í”¼ì²˜ ì œê³µ
    â”‚   â””â”€ A/B í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
    â”‚      â””â”€ ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ ìë™í™”
    â”‚
    â””â”€â–º Phase 3: AI ê³ ë„í™” (Q4 2024)
        â”œâ”€ ë”¥ëŸ¬ë‹ ëª¨ë¸ ë„ì…
        â”‚  â””â”€ LSTM, Transformer ê¸°ë°˜ ì˜ˆì¸¡
        â”œâ”€ AutoML ì‹œìŠ¤í…œ
        â”‚  â””â”€ í•˜ì´í¼íŒŒë¼ë¯¸í„° ìë™ ìµœì í™”
        â””â”€ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
           â””â”€ ëª¨ë¸ ì„±ëŠ¥ ì‹¤ì‹œê°„ ì¶”ì 
```

## ğŸ“ Contact

**ê¹€ì¤€ì˜ (Data Engineer)**

ğŸ“§ Email: ks1004mj@gmail.com  
ğŸ”— GitHub: github.com/junyoung137

---

â­ **Star this repo if you find it useful!**
